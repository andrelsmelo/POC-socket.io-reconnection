(this["webpackJsonpPOC Teste"]=this["webpackJsonpPOC Teste"]||[]).push([[0],{34:function(e,t,n){e.exports=n(71)},39:function(e,t,n){},40:function(e,t,n){},68:function(e,t){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(31),o=n.n(r),l=(n(39),n(40),function(e){return c.a.createElement("div",{className:"list-group"},c.a.createElement("span",{className:"list-title"},"Jogadores"),Object.keys(e.players).map((function(t){return c.a.createElement("div",{key:t,className:"list-item"},e.players[t].name)})))}),s=n(2),i=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var e=document.getElementById("chat-content");e.scrollTop=e.scrollHeight}),[e.messages]),c.a.createElement("div",{className:"chat-container"},c.a.createElement("div",{id:"chat-content",className:"chat-content"},e.messages.join("\n\n")),c.a.createElement("div",{className:"chat-form"},c.a.createElement("input",{type:"text",value:r,onChange:function(e){return o(e.target.value)}}),c.a.createElement("button",{disabled:!r.trim(),className:r.trim()?"":"disabled",onClick:function(){e.sendMessage(r),o("")}},"Enviar")))},u=n(33),m=n(3),E=n(32),d=n.n(E)()(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_ADDRESS,{autoConnect:!1}),p=c.a.createContext(),f=function(e,t){switch(t.type){case"CONNECTED":return Object(m.a)({},e,{isConnected:t.payload});case"RESET_STATE":return Object(m.a)({},y,{isConnected:e.isConnected});case"PLAYER":return Object(m.a)({},e,{player:t.payload});case"PLAYERS":return Object(m.a)({},e,{players:t.payload});case"ADD_MESSAGE":return Object(m.a)({},e,{messages:[].concat(Object(u.a)(e.messages),[t.payload])});default:return e}},y={isConnected:!1,player:{},players:{},messages:[]},g=function(e){var t=Object(a.useReducer)(f,y),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){d.on("connect",(function(){localStorage.getItem("player")&&d.emit("Reconnect",JSON.parse(localStorage.getItem("player"))),o({type:"CONNECTED",payload:!0})})),d.on("disconnect",(function(){o({type:"CONNECTED",payload:!1})})),d.on("PlayersRefresh",(function(e){var t=e[d.id];t?(localStorage.setItem("player",JSON.stringify(t)),o({type:"PLAYER",payload:e[d.id]})):o({type:"RESET_STATE"}),o({type:"PLAYERS",payload:e})})),d.on("ReceiveMessage",(function(e){o({type:"ADD_MESSAGE",payload:e})})),d.open()}),[]),c.a.createElement(p.Provider,{value:r},e.children)},v=function(e){d.emit("SendMessage",e)},O=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1];return c.a.createElement("main",null,c.a.createElement("section",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){d.emit("Login",e)}(n)}},c.a.createElement("div",{className:"input-group"},c.a.createElement("label",null,"Nome:"),c.a.createElement("input",{placeholder:"Informe o nome para entrar no jogo",value:n,onChange:function(e){return r(e.target.value)},required:!0})),c.a.createElement("button",null,"Entrar"))))},S=function(){var e=Object(a.useContext)(p),t=e.isConnected,n=e.player,r=e.players,o=e.messages;return t?0===Object.keys(n).length?c.a.createElement(O,null):c.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},c.a.createElement("div",{className:"list-container"},c.a.createElement(l,{players:r})),c.a.createElement(i,{sendMessage:v,messages:o})):c.a.createElement("div",null,"Desconectado, conectando...")};var b=function(){return c.a.createElement("div",{className:"main-container"},c.a.createElement(g,null,c.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.c698d645.chunk.js.map